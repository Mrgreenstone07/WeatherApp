<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>14-Day Weather Forecast</title>
    <link rel="stylesheet" href="14forecast.css">
</head>
<body>
    <div class="background-video">
        <video autoplay loop muted>
            <source src="images/856463-hd_1920_1080_30fps.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>

    <div class="card">
        <img id="back-image" src="images/gif1.gif" alt="Go back" title="Go back">
        <h2 id="city-name-header">14-Day Weather Forecast for City</h2>
        <div class="forecast" id="forecast"></div>
    </div>
    <div class="forecast-item">
        <h3>${dayName}</h3>
        <img src="${day.day.condition.icon}" alt="${day.day.condition.text}">
        <p>${day.day.avgtemp_c}°C</p>
        <p class="condition">${day.day.condition.text}</p>
        <div class="details">
            <p>Humidity: ${day.day.avghumidity}%</p>
            <p>Wind Speed: ${day.day.maxwind_kph} km/h</p>
        </div>
        <div class="hourly-data" style="display: none;"></div> <!-- Add this line -->
    </div>
    
    <div class="forecast-item">
        <h3>Day 1</h3>
        <p class="details">Temperature: 25°C</p>
        <p class="details">Humidity: 60%</p>
    </div>
    <div class="forecast-item">
        <h3>Tuesday, October 1</h3>
        <p class="details">Patchy rain nearby</p>
        <p class="temperature">28.2°C</p>
        <p class="details">Patchy rain nearby</p>
    </div> 
     
    

    <script>
        const apiKey = "b4fcc86269eb4e19ac2140532242709"; // Replace with your WeatherAPI key
        const city = localStorage.getItem('selectedCity');

        async function fetchForecast(city) {
            const apiUrl = `https://api.weatherapi.com/v1/forecast.json?key=${apiKey}&q=${city}&days=14`;

            try {
                const response = await fetch(apiUrl);
                if (!response.ok) {
                    throw new Error("Failed to fetch data");
                }

                const data = await response.json();
                displayForecast(data);
            } catch (error) {
                alert(error.message);
            }
        }

        function displayForecast(data) {
            const forecastContainer = document.getElementById("forecast");
            forecastContainer.innerHTML = ""; // Clear previous forecasts
            document.getElementById("city-name-header").textContent = `14-Day Weather Forecast for ${data.location.name}`;

            data.forecast.forecastday.forEach(day => {
                const forecastItem = document.createElement("div");
                forecastItem.classList.add("forecast-item");

                const date = new Date(day.date);
                const options = { weekday: 'long', month: 'long', day: 'numeric' };
                const dayName = date.toLocaleDateString('en-US', options);

                forecastItem.innerHTML = `
                    <h3>${dayName}</h3>
                    <img src="${day.day.condition.icon}" alt="${day.day.condition.text}">
                    <p>${day.day.avgtemp_c}°C</p>
                    <p class="condition">${day.day.condition.text}</p>
                    <div class="details">
                        <p>Humidity: ${day.day.avghumidity}%</p>
                        <p>Wind Speed: ${day.day.maxwind_kph} km/h</p>
                    </div>
                     <div class="hourly-data" style="display: none;"></div> 
                `;

                // Toggle details on click
        forecastItem.addEventListener("click", async () => {
            const hourlyData = await fetchHourlyData(index); // Fetch hourly data for the clicked day
            const hourlyContainer = forecastItem.querySelector(".hourly-data");

            // Display hourly data
            hourlyContainer.innerHTML = hourlyData.map(hour => `
                <div class="hour">
                    <span>${new Date(hour.time).getHours()}:00 - ${hour.temp_c}°C</span>
                </div>
            `).join("");
            hourlyContainer.style.display = hourlyContainer.style.display === 'none' ? 'block' : 'none';
        });

                forecastContainer.appendChild(forecastItem);
            });
        }
        function generateHourlyData(hours) {
            return hours.map(hour => `
                <div class="hour">${hour.time.split(' ')[1]} - ${hour.temp_c}°C</div>
            `).join('');
        }

        function toggleHourlyData(element) {
            const hourlyData = element.querySelector('.hourly-data');
            hourlyData.style.display = hourlyData.style.display === 'none' || hourlyData.style.display === '' ? 'flex' : 'none';
        }
        
        document.getElementById("back-image").addEventListener("click", () => {
        window.history.back(); // Go to the previous page
    });
      

    
        // Fetch the forecast for the city
        fetchForecast(city);
        
    </script>
</body>
</html>





